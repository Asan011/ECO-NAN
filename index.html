<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–≠–∫–æ-–ù–∞–Ω ‚Äî –ø–µ–∫–∞—Ä–Ω—è</title>
  <meta name="description" content="–≠–∫–æ-–ù–∞–Ω ‚Äî —Å–≤–µ–∂–∏–π —Ö–ª–µ–± –∏ –ø–∏—Ä–æ–∂–Ω—ã–µ. –û–Ω–ª–∞–π–Ω-–º–µ–Ω—é, –∫–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞—è–≤–∫–∞ –≤ Telegram." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root{
      --bg:#fafafa;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --brand:#3cae36;
      --brand-dark:#2a8b26;
      --accent:#b37b47;
      --ring: rgba(60,174,54,0.35);
      --shadow: 0 10px 20px rgba(0,0,0,.06), 0 6px 6px rgba(0,0,0,.04);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg)}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{width:min(1200px,92%);margin-inline:auto}

    /* Header */
    header{position:sticky;top:0;z-index:60;background:rgba(255,255,255,.9);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid #eee}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:.8rem 0}
    .nav-left{display:flex;gap:1rem;align-items:center}
    .logo{display:flex;align-items:center;gap:.6rem;font-weight:700}
    .logo img{width:36px;height:36px;border-radius:50%}
    .nav-links{display:flex;gap:.2rem}
    .nav-links a{padding:.5rem .9rem;border-radius:12px;transition:.2s}
    .nav-links a:hover{background:#f3f4f6}
    .actions{display:flex;gap:.6rem;align-items:center}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.7rem 1rem;border-radius:12px;border:1px solid #e5e7eb;background:var(--card);box-shadow:var(--shadow);cursor:pointer;transition:.2s}
    .btn:hover{transform:translateY(-1px)}
    .btn-primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .btn-primary:hover{background:var(--brand-dark)}
    select.lang{padding:.6rem .9rem;border-radius:12px;border:1px solid #e5e7eb;background:var(--card)}
    .btn.icon{width:44px;height:44px;padding:0;font-size:20px}

    /* Hero */
    .hero{position:relative;isolation:isolate}
    .hero .wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:2rem;align-items:center;padding:3rem 0}
    .pill{display:inline-flex;align-items:center;gap:.5rem;padding:.35rem .7rem;border-radius:999px;background:#ecfdf5;color:#065f46;font-weight:600;font-size:.85rem}
    .headline{font-size:clamp(2rem,4.5vw,3.2rem);line-height:1.1;margin:.6rem 0 1rem}
    .sub{color:var(--muted);font-size:1.05rem}
    .hero-card{background:radial-gradient(1200px 400px at -10% -10%, #e6f7e5 0, transparent 60%), var(--card);padding:2rem;border-radius:var(--radius);box-shadow:var(--shadow)}
    .hero img{border-radius:var(--radius)}

    /* Section */
    section{padding:3rem 0}
    .section-title{display:flex;align-items:end;justify-content:space-between;margin-bottom:1.4rem}
    .section-title h2{font-size:clamp(1.4rem,2.8vw,2rem);margin:0}
    .muted{color:var(--muted)}

    /* Menu grid */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.1rem}
    @media (max-width: 1024px){.hero .wrap{grid-template-columns:1fr}.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width: 560px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .card-body{padding:1rem;display:flex;flex-direction:column;gap:.5rem}
    .title{font-weight:600}
    .price{font-weight:700;color:var(--accent)}
    .qty{display:flex;align-items:center;gap:.5rem}
    .qty button{width:34px;height:34px;border-radius:10px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}

    /* Cart drawer */
    .cart-btn{position:relative}
    .badge{position:absolute;top:-6px;right:-6px;background:var(--brand);color:#fff;border-radius:999px;padding:.1rem .45rem;font-size:.75rem;font-weight:700}
    .drawer{position:fixed;inset:0;display:none;z-index:70}
    .drawer[aria-open="true"]{display:block}
    .drawer .overlay{position:absolute;inset:0;background:rgba(0,0,0,.35)}
    .drawer .panel{position:absolute;top:0;right:0;height:100%;width:min(520px,92%);background:#fff;box-shadow: -8px 0 24px rgba(0,0,0,.12);display:flex;flex-direction:column}
    .panel header{position:sticky;top:0;border-bottom:1px solid #eee;background:#fff;display:flex;align-items:center;justify-content:space-between;padding:.8rem 1rem}
    .panel .content{padding:1rem;flex:1;overflow:auto}
    .cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:.8rem;align-items:center;padding:.6rem 0;border-bottom:1px dashed #eee}
    .cart-item img{width:64px;height:64px;object-fit:cover;border-radius:12px}
    .cart-item .name{font-weight:600}
    .panel footer{padding:1rem;border-top:1px solid #eee}

    /* Mobile NAV drawer */
    .drawer.navdrawer .panel{width:min(360px,92%)}
    .drawer.navdrawer .content a{display:block;padding:.9rem 1rem;border-radius:12px;margin:.2rem 0}
    .drawer.navdrawer .content a:hover{background:#f3f4f6}

    /* Checkout */
    .form{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .form .full{grid-column:1/-1}
    .field{display:flex;flex-direction:column;gap:.4rem}
    .input, .select, textarea{padding:.75rem .9rem;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
    textarea{min-height:100px}
    .pay{display:flex;gap:.7rem;flex-wrap:wrap}
    .chip{display:flex;align-items:center;gap:.45rem;border:1px solid #e5e7eb;border-radius:999px;padding:.5rem .8rem;background:#fff;cursor:pointer}
    .chip input{accent-color:var(--brand)}

    /* Footer */
    footer{padding:2rem 0;border-top:1px solid #eee;color:var(--muted)}

    /* Smooth reveal */
    .reveal{opacity:0;transform:translateY(10px);transition:.5s}
    .reveal.show{opacity:1;transform:none}

    /* Responsive header: mobile only */
    @media (max-width: 860px){
      .nav-links{display:none}
      select.lang{display:none}
      #openNav{display:inline-flex}
    }
    @media (min-width: 861px){
      #openNav{display:none}
    }

    /* Map box */
    #map{height:420px;border-radius:18px;overflow:hidden;box-shadow:var(--shadow);margin-top:8px}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <div class="nav-left">
        <a href="#home" class="logo">
          <img src="ChatGPT Image 15 –∞–≤–≥. 2025 –≥., 20_07_36.png" alt="–≠–∫–æ-–ù–∞–Ω –ª–æ–≥–æ—Ç–∏–ø" onerror="this.style.display='none'" />
          <span style="color: #2a8b26;">–≠–∫–æ-–ù–∞–Ω</span>
        </a>
        <nav class="nav-links">
          <a href="#home" data-i18n="nav.home">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="#menu" data-i18n="nav.menu">–ú–µ–Ω—é</a>
          <a href="#contacts" data-i18n="nav.contacts">–ê–¥—Ä–µ—Å–∞</a>
        </nav>
      </div>

      <div class="actions">
        <button class="btn cart-btn" id="openCart" aria-label="Cart">
          üß∫ <span data-i18n="ui.cart">–ö–æ—Ä–∑–∏–Ω–∞</span>
          <span class="badge" id="cartCount">0</span>
        </button>
        <button class="btn icon" id="openNav" aria-label="Menu">‚ò∞</button>
        <select class="lang" id="lang">
          <option value="ru">RU</option>
          <option value="ky">KG</option>
          <option value="en">EN</option>
        </select>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section id="home" class="hero">
    <div class="container wrap">
      <div class="hero-card reveal">
        <span class="pill" data-i18n="hero.pill">–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —Å–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞</span>
        <h1 class="headline" data-i18n="hero.title">–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Ö–ª–µ–± –∏ –ø–∏—Ä–æ–∂–Ω—ã–µ –∏–∑ –≠–∫–æ-–ù–∞–Ω</h1>
        <p class="sub" data-i18n="hero.text">–í—ã–±–∏—Ä–∞–π—Ç–µ –ª—é–±–∏–º—É—é –≤—ã–ø–µ—á–∫—É –æ–Ω–ª–∞–π–Ω ‚Äî –æ—Ñ–æ—Ä–º–ª—è–π—Ç–µ –∑–∞–∫–∞–∑ –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ Telegram.</p>
        <div style="margin-top:1rem;display:flex;gap:.6rem;flex-wrap:wrap">
          <a href="#menu" class="btn btn-primary" data-i18n="hero.cta">–°–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é</a>
          <a href="#contacts" class="btn" data-i18n="hero.cta2">–ê–¥—Ä–µ—Å–∞</a>
        </div>
      </div>
      <div class="reveal">
        <img src="https://images.unsplash.com/photo-1549931319-a545dcf3bc73?q=80&w=1400&auto=format&fit=crop" alt="–°–≤–µ–∂–∏–π —Ö–ª–µ–±">
      </div>
    </div>
  </section>

  <!-- Menu -->
  <section id="menu">
    <div class="container">
      <div class="section-title">
        <h2 data-i18n="menu.title">–ú–µ–Ω—é</h2>
      </div>
      <div class="grid" id="menuGrid"></div>
    </div>
  </section>

  <!-- Checkout -->
  <section id="checkout">
    <div class="container">
      <div class="section-title">
        <h2 data-i18n="checkout.title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <span class="muted" data-i18n="checkout.subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</span>
      </div>
      <form id="orderForm" class="form">
        <div class="field">
          <label for="name" data-i18n="form.name">–í–∞—à–µ –∏–º—è</label>
          <input id="name" class="input" required placeholder="–ê—Å–∞–Ω" />
        </div>
        <div class="field">
          <label for="phone" data-i18n="form.phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
          <input id="phone" class="input" required placeholder="+996 773 200 015" />
        </div>
        <div class="field full">
          <label for="address" data-i18n="form.address">–ê–¥—Ä–µ—Å (–¥–æ—Å—Ç–∞–≤–∫–∞) –∏–ª–∏ –æ—Ç–º–µ—Ç—å—Ç–µ —Å–∞–º–æ–≤—ã–≤–æ–∑</label>
          <input id="address" class="input" placeholder="–ë–∞–∫–∞–µ–≤–∞ 140" />
        </div>
        <div class="field full">
          <span class="muted" data-i18n="form.paytitle">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</span>
          <div class="pay">
            <label class="chip"><input type="radio" name="pay" value="MBank" checked/> MBank</label>
            <label class="chip"><input type="radio" name="pay" value="Optima"/> Optima</label>
            <label class="chip"><input type="radio" name="pay" value="Cash"/> –ù–∞–ª–∏—á–Ω—ã–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</label>
          </div>
        </div>
        <div class="field full">
          <label for="comment" data-i18n="form.comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
          <textarea id="comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –±–µ–∑ —Å–∞—Ö–∞—Ä–∞, –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ—Å–ª–µ 18:00"></textarea>
        </div>
        <div class="field full">
          <button type="submit" class="btn btn-primary" style="width:100%" data-i18n="form.submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –≤ Telegram</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Addresses -->
  <section id="contacts">
    <div class="container">
      <div class="section-title">
        <h2 data-i18n="contacts.title">–ê–¥—Ä–µ—Å–∞</h2>
        <span class="muted" data-i18n="contacts.subtitle">–ù–∞—à–∏ –º–∞–≥–∞–∑–∏–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ</span>
      </div>

      <div id="map" class="reveal"></div>

      <div style="margin-top:1rem" class="muted">
        <details>
          <summary>–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤</summary>
          <ul id="addrList" style="margin-top:.5rem"></ul>
        </details>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">¬© <span id="year"></span> –≠–∫–æ-–ù–∞–Ω. <span class="muted" data-i18n="footer.txt">–°–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.</span></div>
  </footer>

  <!-- Cart Drawer -->
  <div class="drawer" id="drawer" aria-open="false" aria-hidden="true">
    <div class="overlay" id="closeCart"></div>
    <div class="panel">
      <header class="nav">
        <div style="font-weight:700">üß∫ <span data-i18n="ui.cart">–ö–æ—Ä–∑–∏–Ω–∞</span></div>
        <button class="btn" id="xClose">‚úï</button>
      </header>
      <div class="content" id="cartItems"></div>
      <footer>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:.8rem">
          <div class="muted" data-i18n="cart.total">–ò—Ç–æ–≥–æ</div>
          <div style="font-weight:800" id="cartTotal">0 KGS</div>
        </div>
        <div style="display:flex;gap:.6rem;flex-wrap:wrap">
          <a href="#checkout" class="btn btn-primary" id="toCheckout" data-i18n="cart.checkout">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é</a>
          <button class="btn" id="clearCart" data-i18n="cart.clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
      </footer>
    </div>
  </div>

  <!-- Mobile NAV Drawer -->
  <div class="drawer navdrawer" id="navDrawer" aria-open="false" aria-hidden="true">
    <div class="overlay" id="closeNav"></div>
    <div class="panel">
      <header class="nav">
        <div style="font-weight:700">–ú–µ–Ω—é</div>
        <button class="btn" id="xNav">‚úï</button>
      </header>
      <div class="content">
        <a href="#home" data-i18n="nav.home" class="mnav">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="#menu" data-i18n="nav.menu" class="mnav">–ú–µ–Ω—é</a>
        <a href="#contacts" data-i18n="nav.contacts" class="mnav">–ê–¥—Ä–µ—Å–∞</a>
        <div style="height:1px;background:#eee;margin:1rem 0"></div>
        <div class="field">
          <label for="langMobile" class="muted" data-i18n="ui.lang">–Ø–∑—ã–∫</label>
          <select class="input" id="langMobile">
            <option value="ru">RU</option>
            <option value="ky">KG</option>
            <option value="en">EN</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Leaflet JS (must be before inline script that uses L) -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // ===== Helpers
    const $ = (s, p=document) => p.querySelector(s);
    const $$ = (s, p=document) => p.querySelectorAll(s);
    const fmt = (n) => new Intl.NumberFormat('ru-KG', {style:'currency', currency:'KGS', maximumFractionDigits:0}).format(n);

    // ===== I18N
    const i18n = {
      ru: {
        'nav.home':'–ì–ª–∞–≤–Ω–∞—è','nav.menu':'–ú–µ–Ω—é','nav.contacts':'–ê–¥—Ä–µ—Å–∞',
        'ui.lang':'–Ø–∑—ã–∫',
        'ui.cart':'–ö–æ—Ä–∑–∏–Ω–∞',
        'hero.pill':'–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —Å–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞',
        'hero.title':'–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Ö–ª–µ–± –∏ –ø–∏—Ä–æ–∂–Ω—ã–µ –∏–∑ –≠–∫–æ-–ù–∞–Ω',
        'hero.text':'–í—ã–±–∏—Ä–∞–π—Ç–µ –ª—é–±–∏–º—É—é –≤—ã–ø–µ—á–∫—É –æ–Ω–ª–∞–π–Ω ‚Äî –æ—Ñ–æ—Ä–º–ª—è–π—Ç–µ –∑–∞–∫–∞–∑ –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ Telegram.',
        'hero.cta':'–°–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é','hero.cta2':'–ê–¥—Ä–µ—Å–∞',
        'menu.title':'–ú–µ–Ω—é',
        'checkout.title':'–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞','checkout.subtitle':'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã',
        'form.name':'–í–∞—à–µ –∏–º—è','form.phone':'–¢–µ–ª–µ—Ñ–æ–Ω','form.address':'–ê–¥—Ä–µ—Å (–¥–æ—Å—Ç–∞–≤–∫–∞) –∏–ª–∏ –æ—Ç–º–µ—Ç—å—Ç–µ —Å–∞–º–æ–≤—ã–≤–æ–∑','form.paytitle':'–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã','form.comment':'–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π','form.submit':'–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –≤ Telegram',
        'contacts.title':'–ê–¥—Ä–µ—Å–∞','contacts.subtitle':'–ù–∞—à–∏ –º–∞–≥–∞–∑–∏–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ','footer.txt':'–°–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.',
        'cart.total':'–ò—Ç–æ–≥–æ','cart.checkout':'–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é','cart.clear':'–û—á–∏—Å—Ç–∏—Ç—å',
        'ui.add':'–í –∫–æ—Ä–∑–∏–Ω—É'
      },
      ky: {
        'nav.home':'–ë–∞—à–∫—ã –±–µ—Ç','nav.menu':'–ú–µ–Ω—é','nav.contacts':'–î–∞—Ä–µ–∫—Ç–µ—Ä',
        'ui.lang':'–¢–∏–ª','ui.cart':'–°–µ–±–µ—Ç',
        'hero.pill':'–ö“Ø–Ω —Å–∞–π—ã–Ω ‚Äî –∂–∞“£—ã –±—ã—à–∫–∞–Ω –Ω–∞–Ω',
        'hero.title':'–≠–∫–æ-–ù–∞–Ω–¥–∞–Ω —Ç–∞–±–∏–≥—ã–π –Ω–∞–Ω –∂–∞–Ω–∞ —Ç–æ–∫–æ—á—Ç–æ—Ä',
        'hero.text':'–°“Ø–π–≥”©–Ω –¥–∞–∞–º—ã“£–¥—ã –æ–Ω–ª–∞–π–Ω —Ç–∞–Ω–¥–∞ ‚Äî –∑–∞–∫–∞–∑ Telegram‚Äô–≥–∞ –∂”©–Ω”©—Ç“Ø–ª”©—Ç.',
        'hero.cta':'–ú–µ–Ω—é–Ω—É –∫”©—Ä“Ø“Ø','hero.cta2':'–î–∞—Ä–µ–∫—Ç–µ—Ä',
        'menu.title':'–ú–µ–Ω—é',
        'checkout.title':'–ó–∞–∫–∞–∑–¥—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è–ª–æ–æ','checkout.subtitle':'–ë–∞–π–ª–∞–Ω—ã—à –∂–∞–Ω–∞ —Ç”©–ª”©–º —ã–∫–º–∞—Å—ã–Ω —Ç–æ–ª—Ç—É—Ä—É“£—É–∑',
        'form.name':'–ê—Ç—ã“£—ã–∑','form.phone':'–¢–µ–ª–µ—Ñ–æ–Ω','form.address':'–î–∞—Ä–µ–∫ (–∂–µ—Ç–∫–∏—Ä“Ø“Ø) –∂–µ ”©–∑“Ø“£ –∞–ª—ã–ø –∫–µ—Ç“Ø“Ø','form.paytitle':'–¢”©–ª”©–º —ã–∫–º–∞—Å—ã','form.comment':'–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π','form.submit':'–ó–∞–∫–∞–∑–¥—ã Telegram‚Äô–≥–∞ –∂”©–Ω”©—Ç“Ø“Ø',
        'contacts.title':'–î–∞—Ä–µ–∫—Ç–µ—Ä','contacts.subtitle':'–î“Ø–∫”©–Ω–¥”©—Ä –∫–∞—Ä—Ç–∞–¥–∞','footer.txt':'–ö“Ø–Ω —Å–∞–π—ã–Ω –∂–∞“£—ã –Ω–∞–Ω.',
        'cart.total':'–ñ–∞–ª–ø—ã','cart.checkout':'–û—Ñ–æ—Ä–º–ª–µ–Ω–∏—è–ª–æ–æ–≥–æ ”©—Ç“Ø“Ø','cart.clear':'–¢–∞–∑–∞–ª–æ–æ',
        'ui.add':'–°–µ–±–µ—Ç–∫–µ'
      },
      en: {
        'nav.home':'Home','nav.menu':'Menu','nav.contacts':'Addresses',
        'ui.lang':'Language','ui.cart':'Cart',
        'hero.pill':'Freshly baked daily','hero.title':'Natural bread & pastries from Eco-Nan',
        'hero.text':'Choose your favorites online ‚Äî submit an order and get a Telegram confirmation.',
        'hero.cta':'View menu','hero.cta2':'Addresses',
        'menu.title':'Menu',
        'checkout.title':'Checkout','checkout.subtitle':'Fill in your contacts and payment method',
        'form.name':'Your name','form.phone':'Phone','form.address':'Address (delivery) or pickup','form.paytitle':'Payment method','form.comment':'Comment','form.submit':'Send order to Telegram',
        'contacts.title':'Addresses','contacts.subtitle':'Our shops on the map','footer.txt':'Fresh bakes every day.',
        'cart.total':'Total','cart.checkout':'Go to checkout','cart.clear':'Clear',
        'ui.add':'Add to cart'
      }
    };

    function setLang(lang){
      const dict = i18n[lang] || i18n.ru;
      for (const el of $$('[data-i18n]')){
        const key = el.getAttribute('data-i18n');
        if (dict[key]) el.textContent = dict[key];
      }
      document.documentElement.lang = lang;
      // sync selects
      const s1 = $('#lang'); if(s1) s1.value = lang;
      const s2 = $('#langMobile'); if(s2) s2.value = lang;
      renderMenu();
      renderCart();
    }

    $('#lang')?.addEventListener('change', e=> setLang(e.target.value));
    document.addEventListener('change', (e)=>{ if(e.target && e.target.id==='langMobile') setLang(e.target.value); });

    // ===== Products
    const P = [
      {id:1, name:{ru:'–ë—É—Ö–∞–Ω–∫–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è', ky:'–ö–ª–∞—Å—Å–∏–∫–∞–ª—ã–∫ –Ω–∞–Ω', en:'Classic loaf'}, price:55, img:'https://repost.uz/storage/uploads/7245-1636979692-nadira-post-material.jpeg'},
      {id:2, name:{ru:'–ë–∞–≥–µ—Ç —Ö—Ä—É—Å—Ç—è—â–∏–π', ky:'–•—Ä—É—Å—Ç—Ç–∞–≥—ã –±–∞–≥–µ—Ç', en:'Crispy baguette'}, price:70, img:'https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=1200&auto=format&fit=crop'},
      {id:3, name:{ru:'–•–ª–µ–± —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π', ky:'–¢–æ–ª—É–∫ –¥–∞–Ω –Ω–∞–Ω', en:'Wholegrain bread'}, price:85, img:'https://images.unsplash.com/photo-1608198093002-ad4e005484ec?q=80&w=1200&auto=format&fit=crop'},
      {id:4, name:{ru:'–°–∞–º—Å–∞ –¥–æ–º–∞—à–Ω—è—è', ky:'“Æ–π —Å–∞–º—Å–∞—Å—ã', en:'Homemade samsa'}, price:90, img:'https://yarhleb.org/upload/medialibrary/dee/deed45bac275777f436307bfbd506c60.jpg'},
      {id:5, name:{ru:'–ö—Ä—É–∞—Å—Å–∞–Ω —Å–ª–∏–≤–æ—á–Ω—ã–π', ky:'–ú–∞–π–ª—É—É –∫—Ä—É–∞—Å—Å–∞–Ω', en:'Butter croissant'}, price:75, img:'https://img.iamcook.ru/2024/upl/recipes/cat/u-4ef3b76da83d15005b2eba264c6c4f55.JPG'},
      {id:6, name:{ru:'–ü–∏—Ä–æ–∂–Ω–æ–µ –º–µ–¥–æ–≤–æ–µ', ky:'–ë–∞–ª –ø–∏—Ä–æ–∂–Ω–æ–µ', en:'Honey pastry'}, price:95, img:'https://vkusnoff.com/img/recepty/3640/big.webp'},
      {id:7, name:{ru:'–ß–∞–∫-—á–∞–∫', ky:'–ß–∞–∫-—á–∞–∫', en:'Chak-chak'}, price:110, img:'https://ic.pics.livejournal.com/miss_hohotyn007/73968878/5285014/5285014_600.jpg'},
      {id:8, name:{ru:'–ù–∞–ø–æ–ª–µ–æ–Ω', ky:'–ù–∞–ø–æ–ª–µ–æ–Ω', en:'Napoleon cake'}, price:120, img:'https://www.chefmarket.ru/blog/wp-content/uploads/2019/09/delicious-cupcakes--e1567691422467.jpg'}
    ];

    // ===== Render menu
    const grid = $('#menuGrid');
    function renderMenu(){
      grid.innerHTML = '';
      const lang = document.documentElement.lang || 'ru';
      for(const p of P){
        const card = document.createElement('div');
        card.className = 'card reveal';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name[lang]}" loading="lazy"/>
          <div class="card-body">
            <div class="title">${p.name[lang]}</div>
            <div class="muted">450 –≥</div>
            <div style="display:flex;align-items:center;justify-content:space-between;margin-top:.4rem">
              <div class="price">${fmt(p.price)}</div>
              <button class="btn btn-primary" data-add="${p.id}">+ <span data-i18n="ui.add">${i18n[document.documentElement.lang||'ru']['ui.add']}</span></button>
            </div>
          </div>`;
        grid.appendChild(card);
      }
      applyReveal();
    }

    // ===== Cart logic
    let cart = [];
    const updateBadge = ()=> { const b = $('#cartCount'); if(b) b.textContent = cart.reduce((s,i)=>s+i.qty,0); };
    const openDrawer = ()=> {const d=$('#drawer'); d.setAttribute('aria-open','true'); d.removeAttribute('aria-hidden');}
    const closeDrawer = ()=> {const d=$('#drawer'); d.setAttribute('aria-open','false'); d.setAttribute('aria-hidden','true');}

    function addToCart(id){
      const prod = P.find(p=>p.id==id); if(!prod) return;
      const it = cart.find(i=>i.id==id);
      if(it) it.qty++; else cart.push({id:prod.id, qty:1});
      persist(); renderCart();
    }
    function changeQty(id,delta){
      const it = cart.find(i=>i.id==id); if(!it) return;
      it.qty += delta; if(it.qty<=0) cart = cart.filter(i=>i.id!=id);
      persist(); renderCart();
    }
    function clearCart(){ cart=[]; persist(); renderCart(); }
    function persist(){ localStorage.setItem('eco_cart', JSON.stringify(cart)); }
    function restore(){ try{ cart = JSON.parse(localStorage.getItem('eco_cart')||'[]') }catch{ cart=[] } }

    function renderCart(){
      updateBadge();
      const lang = document.documentElement.lang || 'ru';
      const box = $('#cartItems');
      if(!box) return;
      if(cart.length===0){ box.innerHTML = `<p class="muted">${ lang==='en' ? 'Your cart is empty' : (lang==='ky'?'–°–µ–±–µ—Ç –±–æ—à':'–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞') }</p>`; $('#cartTotal').textContent = fmt(0); return }
      let total = 0;
      box.innerHTML = cart.map(it=>{
        const p = P.find(x=>x.id==it.id); const sum = p.price*it.qty; total+=sum;
        return `<div class="cart-item">
          <img src="${p.img}" alt="${p.name[lang]}">
          <div>
            <div class="name">${p.name[lang]}</div>
            <div class="muted">${fmt(p.price)} √ó ${it.qty} = ${fmt(sum)}</div>
            <div class="qty" style="margin-top:.4rem">
              <button data-dec="${p.id}">‚àí</button>
              <span>${it.qty}</span>
              <button data-inc="${p.id}">+</button>
              <button data-del="${p.id}" style="margin-left:.5rem">üóë</button>
            </div>
          </div>
          <div style="font-weight:700">${fmt(sum)}</div>
        </div>`
      }).join('');
      $('#cartTotal').textContent = fmt(total);
    }

    // ===== Checkout ‚Äî send to Telegram (—Ç–≤–æ–π —Ç–æ–∫–µ–Ω/—á–∞—Ç –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å)
    const TG_BOT_TOKEN = '7850919007:AAEomvefxyhlD8jOFgqDRuoyTYZTVoOGVew';
    const TG_CHAT_ID = '1043911649';
    const PROXY_URL = ''; // –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—Ä–æ–∫—Å–∏, —É–∫–∞–∂–∏ URL

    async function sendToTelegram(text){
      if(PROXY_URL){
        const r = await fetch(PROXY_URL, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({text})});
        if(!r.ok) throw new Error('Proxy error');
        return true;
      } else {
        const url = `https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage?chat_id=${encodeURIComponent(TG_CHAT_ID)}&parse_mode=HTML&text=${encodeURIComponent(text)}`;
        const r = await fetch(url, {method:'GET'});
        if(!r.ok) throw new Error('Telegram error');
        return true;
      }
    }

    $('#orderForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      if(cart.length===0){ alert('–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É'); return }
      const lang = document.documentElement.lang || 'ru';
      const name = $('#name').value.trim();
      const phone = $('#phone').value.trim();
      const address = $('#address').value.trim();
      const comment = $('#comment').value.trim();
      const pay = document.querySelector('input[name="pay"]:checked')?.value || 'MBank';
      let total = 0;
      const lines = cart.map(it=>{ const p=P.find(x=>x.id==it.id); const sum=p.price*it.qty; total+=sum; return `‚Ä¢ ${p.name[lang]} ‚Äî ${it.qty} √ó ${p.price} = ${sum} KGS`;});
      const msg = `<b>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ –≠–∫–æ-–ù–∞–Ω</b>%0A%0A`+
        lines.join('%0A')+`%0A<b>–ò—Ç–æ–≥–æ:</b> ${total} KGS%0A%0A`+
        `<b>–ò–º—è:</b> ${name}%0A<b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${phone}%0A<b>–û–ø–ª–∞—Ç–∞:</b> ${pay}%0A<b>–ê–¥—Ä–µ—Å/—Å–∞–º–æ–≤—ã–≤–æ–∑:</b> ${address||'-'}%0A<b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</b> ${comment||'-'}%0A`+
        `%0A–ò—Å—Ç–æ—á–Ω–∏–∫: ${location.href}`;
      try{
        await sendToTelegram(decodeURIComponent(msg));
        alert(lang==='en' ? 'Order sent to Telegram! We will contact you.' : (lang==='ky'?'–ó–∞–∫–∞–∑ Telegram‚Äô–≥–∞ –∂”©–Ω”©—Ç“Ø–ª–¥“Ø! –ë–∞–π–ª–∞–Ω—ã—à–∞–±—ã–∑.':'–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Telegram! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.'));
        clearCart(); e.target.reset();
      }catch(err){
        console.error(err);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞/–ø—Ä–æ–∫—Å–∏.');
      }
    });

    // ===== Click handlers
    document.addEventListener('click', (e)=>{
      const add = e.target.closest('[data-add]'); if(add){ addToCart(+add.getAttribute('data-add')); openDrawer(); }
      const inc = e.target.closest('[data-inc]'); if(inc) changeQty(+inc.getAttribute('data-inc'), +1);
      const dec = e.target.closest('[data-dec]'); if(dec) changeQty(+dec.getAttribute('data-dec'), -1);
      const del = e.target.closest('[data-del]'); if(del){ changeQty(+del.getAttribute('data-del'), -9999); }
    });

    // drawer controls
    $('#openCart')?.addEventListener('click', openDrawer);
    $('#closeCart')?.addEventListener('click', closeDrawer);
    $('#xClose')?.addEventListener('click', closeDrawer);
    $('#clearCart')?.addEventListener('click', clearCart);
    $('#toCheckout')?.addEventListener('click', closeDrawer);

    // nav drawer controls
    const openNav = ()=> {const d=$('#navDrawer'); d.setAttribute('aria-open','true'); d.removeAttribute('aria-hidden');}
    const closeNav = ()=> {const d=$('#navDrawer'); d.setAttribute('aria-open','false'); d.setAttribute('aria-hidden','true');}
    $('#openNav')?.addEventListener('click', openNav);
    $('#closeNav')?.addEventListener('click', closeNav);
    $('#xNav')?.addEventListener('click', closeNav);
    $$('.mnav').forEach(a=> a.addEventListener('click', closeNav));

    // reveal on scroll
    const io = new IntersectionObserver((entries)=> entries.forEach(en=>{ if(en.isIntersecting) en.target.classList.add('show') }), {threshold:.12});
    function applyReveal(){ $$('.reveal').forEach(el=> io.observe(el)); }

    // ===== STATIC store coordinates (approximate) =====
    // –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Ç–æ—á–Ω–µ–µ ‚Äî –ø—Ä–∏—à–ª–∏ —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–ª–∏ —Å–∫–∞–∂–∏, –∏ —è –∏—Å–ø—Ä–∞–≤–ª—é.
    const stores = [
      {label:'–≠–∫–æ–¥“Ø–∫”©–Ω –ê–ô–´–õ –ê–ó–´–ì–´ ‚Äî –§—Ä—É–Ω–∑–µ 605–ê / –ú–æ–ª–æ–¥–∞—è –ì–≤–∞—Ä–¥–∏—è', lat:42.8538, lon:74.5970},
      {label:'–ì–∞–≥–∞—Ä–∏–Ω–∞ 139–∂ (–§–ï–Ø –º–∞–≥)', lat:42.8839, lon:74.6121},
      {label:'–ù–∏–∂–Ω. –î–∂–∞–ª –ñ–ö –ñ–∞–ª –ê—Ä—Ç–∏—Å—Ç ‚Äî –ö–ò–ß–ò –ú–ê–†–ö–ï–¢', lat:42.8920, lon:74.5950},
      {label:'–í–µ—Ä—Ö –î–∂–∞–ª ‚Äî –¢—ã–Ω–∞–ª–∏–µ–≤–∞, –î–∂–∞–ª-29', lat:42.8962, lon:74.6005},
      {label:'–ø—Ä. –ß.–ê–π—Ç–º–∞—Ç–æ–≤–∞ 100/7 ‚Äî –°–ï–í–ï–ù', lat:42.8703, lon:74.5985},
      {label:'–ó–∞—Ä—è –± ‚Äî –¢–¶ –ú–∞–π—Ä –∞–ø–∞, –ö–∏—á–∏ –º–∞—Ä–∫–µ—Ç', lat:42.8935, lon:74.5795},
      {label:'–õ–æ–≥–≤–∏–Ω–µ–Ω–∫–æ 12/116 ‚Äî –ë–£–ë–õ–ò–ö –¥“Ø–∫', lat:42.8655, lon:74.6122},
      {label:'–ê–∫ –û—Ä–¥–æ ‚Äî –ë—É–≥—É —ç–Ω–µ –ö–°–£ 60–∞, –ë–∞–π–±–æ–ª', lat:42.8778, lon:74.5869},
      {label:'–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å ‚Äî –ë–∞–∫–∞–µ–≤–∞ 141, –ö–ò–í–ò –¥“Ø“£', lat:42.8789, lon:74.6105},
      {label:'7 –º–∫—Ä ‚Äî –ñ—É–∫–µ–µ–≤–∞-–ü—É–¥, –®–∏—Ä–∏–Ω –¥“Ø“£', lat:42.8732, lon:74.5617},
      {label:'–û—Ä—Ç–æ-–°–∞–π ‚Äî –Æ–Ω—É—Å–∞–ª–∏–µ–≤–∞ 52/2 (—É —Ö–∞—á–∞–ø—É—Ä–Ω–æ–π)', lat:42.8608, lon:74.6138},
      {label:'–¢–æ–≥–æ–ª–æ–∫ –ú–æ–ª–¥–æ ‚Äî –°—ã–¥—ã–∫–æ–≤–∞ 156, –ó–æ–ª–æ—Ç–æ–π –∫–≤–∞–¥—Ä–∞—Ç', lat:42.8721, lon:74.5579}
    ];

    // ===== Initialize map with static markers =====
    function initMapWithMarkers(){
      if(typeof L === 'undefined'){
        const el = document.getElementById('map');
        if(el) el.innerHTML = '<div style="padding:18px;color:#666">–û—à–∏–±–∫–∞: –∫–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ (Leaflet –Ω–µ –Ω–∞–π–¥–µ–Ω).</div>';
        console.error('Leaflet (L) is undefined');
        return;
      }
      const map = L.map('map').setView([42.8746, 74.5698], 12);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap'
      }).addTo(map);

      const bounds = [];
      const listEl = $('#addrList'); if(listEl) listEl.innerHTML = '';

      stores.forEach(s => {
        if(s.lat && s.lon){
          const marker = L.marker([s.lat, s.lon]).addTo(map).bindPopup(`<b>${s.label}</b>`);
          bounds.push([s.lat, s.lon]);
          if(listEl){
            const li = document.createElement('li');
            li.textContent = s.label;
            li.style.cursor = 'pointer';
            li.style.marginBottom = '6px';
            li.addEventListener('click', ()=> { map.setView([s.lat, s.lon], 16); marker.openPopup(); });
            listEl.appendChild(li);
          }
        } else {
          if(listEl){ const li = document.createElement('li'); li.textContent = s.label + ' (–∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)'; listEl.appendChild(li); }
        }
      });

      if(bounds.length) map.fitBounds(bounds, {padding:[30,30]});
    }

    // ===== Init all
    (function init(){
      document.getElementById('year').textContent = new Date().getFullYear();
      setLang('ru');
      renderMenu();
      restore();
      renderCart();
      applyReveal();
      initMapWithMarkers();
    })();
  </script>

  <!--
  –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ `stores` –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã; —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ—á–Ω—ã–µ —Ç–æ—á–∫–∏,
    –ø—Ä–∏—à–ª–∏ —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat/lon) –∏–ª–∏ —Å–∫–∞–∂–∏, –∫–∞–∫–∏–µ –º–µ—Ç–∫–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å ‚Äî —è –ø–æ–ø—Ä–∞–≤–ª—é.
  - –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –∫–∞—Ä—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –≥–µ–æ–∫–æ–¥–∏–Ω–≥ (–ø–æ –∞–¥—Ä–µ—Å—É) –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏,
    –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å Nominatim-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã.
  -->
</body>
</html>
